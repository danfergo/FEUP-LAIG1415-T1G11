<anf>
     <globals>
          <drawing mode="fill" shading="flat" background="0 0 0 1" />
          <culling face="back" order="ccw" />
          <lighting doublesided="false" local="true" enabled="true" ambient="0.8 0.8 0.8 1" />			
    </globals> 
    
    <cameras initial="ss" >
        <!-- tem de existir, pelo menos uma camara dos tipos seguintes (perspective ou ortho) -->
	
         <perspective id="ss" near="ff" far="ff" angle="ff" pos="ff ff ff" target="ff ff ff" /> 
         <ortho id="ss" near="ff" far="ff" left="ff" right="ff" top="ff" bottom="ff" /> 

    </cameras>
  

    <!-- bloco de luzes -->
    <lights>
            <!-- Deve existir pelo menos uma luz declarada -->
            <light id="Ommnnnn" type="omni" enabled="true" marker="true" pos="0 50 5" >
              <component type="ambient" value="0.1 0.1 0.1 0" />
              <component type="diffuse" value="1 1 1 1" />
              <component type="specular" value="0 0 0 0" />

            </light>
<!--
            <light id="ss" type="spot" enabled="true" marker="true" pos="5 1 5" target="7 0 7"
                angle="10" exponent="9" >
              <component type="ambient" value="0.01 0.01 0.01 0.01" />
              <component type="diffuse" value="0.9 0.9 0.9 0.9" />
              <component type="specular" value="0.9 0.9 0.9 0.9" />
            </light> -->
    </lights>

    <!-- bloco de texturas. Este bloco tem de existir mas pode estar vazio, se nao forem usadas texturas -->
    <!--   ver topico 'Notas finais' no enunciado sobre os parametros texlength_... -->
    <textures>
      <texture id="ground" file="src/parking_lot_ground.jpg" texlength_s="80" texlength_t="40" />
      <texture id="brick_wall" file="src/brick_wall.jpg" texlength_s="20" texlength_t="10" />

      <texture id="police_logo" file="police_logo.jpg" texlength_s="0.8" texlength_t="1 " />
    </textures>


    <appearances>

      <appearance id="ground_appearance" shininess="1" textureref="ground" >
        <component type="ambient" value="0.5 0.5 0.5 0" />
        <component type="diffuse" value="0.9 0.9 0.9 0" />
        <component type="specular" value="0.9 0.9  0.9 0" />
      </appearance>
      
      
      <appearance id="lightgray" shininess="1" textureref="" >
          <component type="ambient" value="0.5 0.5 0.5 0" />
          <component type="diffuse" value="0.9 0.9 0.9 0" />
          <component type="specular" value="0.9 0.9  0.9 0" />
      </appearance>

      <appearance id="darkgray" shininess="2" textureref="" >
        <component type="ambient" value="0.05 0.05 0.05 0" />
        <component type="diffuse" value="0.2 0.2 0.2 0" />
        <component type="specular" value="0.2 0.2 0.2 0" />
      </appearance>      
      
      <appearance id="redishorange" shininess="4" textureref="" >
                <component type="ambient" value="0.5 0.1 0 0" />
                <component type="diffuse" value="1 0.2 0 0" />
                <component type="specular" value="1 0.2  0 0" />
      </appearance>
      
      <appearance id="yellow" shininess="3" textureref="" >
               <component type="ambient" value="0.5 0.5 0 0" />
               <component type="diffuse" value="1 1 0 0" />
               <component type="specular" value="1 1 0 0" />
        </appearance> 
		
		<appearance id="white" shininess="5" textureref="police_logo" >
               <component type="ambient" value="0.5 0.5 0.5 0" />
               <component type="diffuse" value="1 1 1 0" />
               <component type="specular" value="1 1 1 0" />
        </appearance> 
		
		<appearance id="blue" shininess="6" textureref="" >
               <component type="ambient" value="0 0 0.5 0" />
               <component type="diffuse" value="0 0 1 0" />
               <component type="specular" value="0 0 1 0" />
        </appearance> 

      
		  <appearance id="black" shininess="1" textureref="" >
               <component type="ambient" value="0.01 0.01 0.01 0" />
               <component type="diffuse" value="0.05 0.05 0.05 0" />
               <component type="specular" value="0.05 0.05 0.05 0" />
     </appearance> 
		
      <!-- donuts store -->

      <appearance id="brick_wall" shininess="1" textureref="brick_wall" >
        <component type="ambient" value="0.5 0.5 0.5 0" />
        <component type="diffuse" value="0.9 0.9 0.9 0" />
        <component type="specular" value="0.9 0.9  0.9 0" />
      </appearance>
      
    </appearances>

    <!-- bloco do grafo; "rootid" identifica o no de raiz -->
    <graph rootid="world">

      <node id="world">

        <descendants>
          <noderef id="groundparkinglot"/>
          <noderef id="cop_car" />
          <noderef id="store" />
        </descendants>
      </node>

      <!-- ::::::::::::::::::::::::::::::::::::: DONUTS STORE ::::::::::::::::::::::::::::::: -->

      <node id="store">

        <descendants>
          <noderef id="front_wall" />
          <noderef id="left_wall" />
          <noderef id="right_wall" />
          <noderef id="back_wall" />
        </descendants>
      </node>


      <node id="back_wall">
        <transforms>
          <transform type="translate" to="26.3 0 6" />
          <transform type="rotate" axis="yy" angle="180"/>
        </transforms>
        <descendants>
          <noderef id="basic_wall"/>
        </descendants>
      </node>

      <node id="right_wall">
        <appearanceref id="brick_wall"/>
        <transforms>
          <transform type="translate" to="26.3 0 28" />
          <transform type="rotate" axis="yy" angle="90"/>
        </transforms>
        <primitives>
          <rectangle xy1="0 8 " xy2="22 10" />
          <rectangle xy1="0 0 " xy2="22 3" />
          <rectangle xy1="0 3 " xy2="0.5 8" />
          <rectangle xy1="21.5 3 " xy2="22 8" />
        </primitives>
      </node>


      <node id="left_wall">
        <transforms>
          <transform type="translate" to="4.3 0 6" />
          <transform type="rotate" axis="yy" angle="-90"/>
        </transforms>
        <descendants>
          <noderef id="basic_wall"/>
        </descendants>
      </node>
      
      <node id="front_wall">
        <appearanceref id="brick_wall"/>
        <transforms>
          <transform type="translate" to="4.3 0 28" />
        </transforms>
        <primitives>
          <rectangle xy1="0 0 " xy2="17 10" />
          <rectangle xy1="17 8 " xy2="22 10" />
          <rectangle xy1="21.5 0 " xy2="22 8" />
        </primitives>
      </node>
      
      
      <node id="basic_wall">
        <appearanceref id="brick_wall"/>
        <primitives>
          <rectangle xy1="0 0 " xy2="22 10" />
        </primitives>
      </node>
      
      
      <!-- ::::::::::::::::::::::::::::::::::::: COP CAR ::::::::::::::::::::::::::::::::::::: -->
      
		<node id="cop_car">
			<transforms>
					<transform type="translate" to="5 0 5" />
			</transforms>
				<descendants>
					<noderef id="cop_car_chassi_right_side"/>
				<!--	<noderef id="cop_car_chassi_right_side"/>-->
				</descendants> 
		</node>
		
		<!--<node id="cop_car_chassi_left_side">
				<appearanceref id="blue"/>
			<transforms>
					<transform type="translate" to="0 0 -2.5" />
					 <transform type="scale" factor="-1 1 1" />
					<transform type="rotate" axis="yy" angle="180"/>
			</transforms>
				 <descendants>
					<noderef id="cop_car_chassi_black_bottom"/>
					<noderef id="cop_car_chassi_black_top"/>
					<noderef id="cop_car_chassi_white_bottom"/>
					<noderef id="cop_car_chassi_white_top"/>
				</descendants> 
		</node>		-->
		
		<node id="cop_car_chassi_right_side">
				<appearanceref id="blue"/>
				 <descendants>
					  <noderef id="cop_car_chassi_right_black_bottom"/>
					  <noderef id="cop_car_chassi_right_black_top"/>
					  <noderef id="cop_car_chassi_right_white_bottom"/>
					  <noderef id="cop_car_chassi_right_white_top"/>
            <noderef id="cop_car_light_front_right"/>
            <noderef id="cop_car_light_front_left"/>
            <noderef id="cop_car_light_back_right"/>
            <noderef id="cop_car_light_back_left"/>
            <noderef id="cop_car_right_front_wheel" />
            <noderef id="cop_car_left_front_wheel" />
            <noderef id="cop_car_right_back_wheel" />
            <noderef id="cop_car_left_back_wheel" />
         </descendants>  
		</node>

      <node id="cop_car_right_front_wheel">
        <transforms>
          <transform type="translate" to="1 0 0" />
        </transforms>
        <descendants>
          <noderef id="cop_car_wheel"/>
        </descendants>
      </node>

      <node id="cop_car_right_back_wheel">
        <transforms>
          <transform type="translate" to="-1 0 0" />
        </transforms>
        <descendants>
          <noderef id="cop_car_wheel"/>
        </descendants>
      </node>
      
      <node id="cop_car_left_back_wheel">
        <transforms>
          <transform type="translate" to="-1 0 -2.3" />
          <transform type="rotate" axis="yy" angle="180" />
        </transforms>
        <descendants>
          <noderef id="cop_car_wheel"/>
        </descendants>
      </node>

      <node id="cop_car_left_front_wheel">
        <transforms>
          <transform type="translate" to="1 0 -2.3" />
          <transform type="rotate" axis="yy" angle="180" />
        </transforms>
        <descendants>
          <noderef id="cop_car_wheel"/>
        </descendants>
      </node>      
      
      <node id="cop_car_wheel" >
        <appearanceref id="lightgray"/>
        <primitives>
              <cylinder base="0.4" top="0.4" height="0.05" slices="20" stacks="20" />
        </primitives>
        <descendants>
          <noderef id="cop_car_wheel_tire" />
        </descendants>
      </node>


      
      <node id="cop_car_wheel_tire" >
        <appearanceref id="darkgray"/>
        <primitives>
          <torus slices="20" loops="20" outer="0.5" inner="0.3"/>
        </primitives>
      </node>


      <node id="cop_car_light_back_left">
        <appearanceref id="redishorange" />
        <transforms>
          <transform type="translate" to="-2.05 0.7 -2" />
        </transforms>
        <descendants>
          <noderef id="cop_car_light" />
        </descendants>
      </node>

      <node id="cop_car_light_back_right">
        <appearanceref id="redishorange" />
        <transforms>
          <transform type="translate" to="-2.05 0.7 -0.3" />
        </transforms>
        <descendants>
          <noderef id="cop_car_light" />
        </descendants>
      </node>

      <node id="cop_car_light_front_left">
        <appearanceref id="yellow" />
        <transforms>
          <transform type="translate" to="2.1 0.5 -2" />
        </transforms>
        <descendants>
          <noderef id="cop_car_light" />
        </descendants>
      </node>      
      
      <node id="cop_car_light_front_right">
        <appearanceref id="yellow" />
        <transforms>
          <transform type="translate" to="2.1 0.5 -0.3" />
        </transforms>
        <descendants>
          <noderef id="cop_car_light" />
        </descendants>
      </node>


      <node id="cop_car_light">
        <transforms>
          <transform type="rotate" axis="yy" angle="90"></transform>
        </transforms>
        <primitives>
          <cylinder base="0.2" top="0.2" height="0.05" slices="20" stacks="20" />
        </primitives>
      </node>
      
      
		<node id="cop_car_chassi_right_black_bottom">
			<appearanceref id="blue"/>
			<primitives>
				<rectangle xy1="-2 0 0" xy2="-1.3 1 0"/>
				<rectangle xy1="-1.3 0.3 0" xy2="-0.8 1 0"/>
				
				<rectangle xy1="0.8 0.3 0" xy2="1.3 1 0"/>
				<rectangle xy1="1.3 0 0" xy2="2.1 1 0"/>

        <triangle xyz1="-2 0 0" xyz2="-2 1 0" xyz3="-2 1 -2.3"/>
        <triangle xyz1="-2 0 0" xyz2="-2 1 -2.3" xyz3="-2 0 -2.3"/>

        <triangle xyz1="-2 1 0" xyz2="-1.2 1 0" xyz3="-1.2 1 -2.3" />
        <triangle xyz1="-2 1 0" xyz2="-1.2 1 -2.3" xyz3="-2 1 -2.3" />

        <triangle xyz3="2.1 1 0" xyz2="1.2 1 0" xyz1="1.2 1 -2.3" />
        <triangle xyz3="2.1 1 0" xyz2="1.2 1 -2.3" xyz1="2.1 1 -2.3" />

        <triangle xyz3="2.1 0 0" xyz2="2.1 1 0" xyz1="2.1 1 -2.3"/>
        <triangle xyz3="2.1 0 0" xyz2="2.1 1 -2.3" xyz1="2.1 0 -2.3"/>

      </primitives>
		</node>


		<node id="cop_car_chassi_right_white_bottom">
			<appearanceref id="white"/>
			<primitives>
				<rectangle xy1="-0.8 0" xy2="0 1"/>
				<rectangle xy1="0 0" xy2="0.8 1"/>

        <triangle xyz1="-0.8 1.797 -0.07" xyz2="0.8 1.797 -0.07" xyz3="-0.8 1.798 -2.3"/>
        <triangle xyz1="0.8 1.797 -0.07" xyz2="0.8 1.797 -2.3" xyz3="-0.8 1.797 -2.3"/>
        
      </primitives>
		</node>

				
		<node id="cop_car_chassi_right_black_top">
			<transforms>
				  <transform type="translate" to="0 1 0" />
				  <transform type="rotate" axis="xx" angle="-5" />
			</transforms>
			<appearanceref id="blue"/>
			<primitives>
				<triangle xyz1="-1.2 0 0" xyz2="-0.8 0 0" xyz3="-0.8 0.8 0"/>
				<triangle xyz1="0.8 0 0" xyz2="1.2 0 0" xyz3="0.8 0.8 0"/>
      </primitives>
		</node>
		
		<node id="cop_car_chassi_right_white_top">
			<transforms>
				  <transform type="translate" to="0 1 0" />
				  <transform type="rotate" axis="xx" angle="-5" />
			</transforms>
			<appearanceref id="white"/>
			<primitives>
				<rectangle xy1="-0.8 0 0" xy2="0 0.8 0"/>
				<rectangle xy1="0 0 0" xy2="0.8 0.8 0"/>
			</primitives>
		</node>
	
                <!-- ENVIRONMENT -->

      <node id="groundparkinglot">
        <appearanceref id="ground_appearance" />
        <transforms>
          <transform type="translate" to="0 0 40"/>
          <transform type="rotate" axis="xx" angle="-90"/>
        </transforms>
        <primitives>
          <rectangle xy1="0 0" xy2="80 40"/>
        </primitives>
      </node>
      
    </graph>
  
  
</anf>
