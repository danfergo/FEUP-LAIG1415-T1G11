<!-- Os comentarios devem ter espacos no inicio e no fim, para   -->
<!--    separar dos hifens                                       -->
<!-- Nao devem ser usados caracteres especiais (p.ex. acentos)   -->
<!-- Todas as tags e atributos sao obrigatorios, exceto onde for -->
<!--    referido o contrario                                     -->
<!-- Os identificadores "id" nao devem ser repetidos, pelo       -->
<!--    menos em entidades do mesmo tipo                         -->


<anf>
 
    <!-- bloco de configuracoes globais -->
    <!-- a declaracao dos componentes deste bloco e' obrigatoria --> 
     <globals>
        <!-- Parametros de desenho -->
        <!-- Valores para mode: "fill" , "line", "point" -->
        <!-- Valores para shading: "flat", "gouraud" ) --> 
          <drawing mode="fill" shading="flat" background="0 0 0 1" />
 
        <!-- Parametros de culling -->
        <!-- Valores para cullface: "none", "back" , "front" ou "both" -->
        <!-- Valores para cullorder : "ccw" ou "cw" -->
           <culling face="back" order="ccw" />
 
        <!-- Parametros de iluminacao; seguem os parametros do OpenGL  -->
            <lighting doublesided="false" local="true" enabled="true" ambient="0.8 0.8 0.8 1" />			
    </globals> 
    
    <!-- bloco de camaras: o atributo "initial" identifica a camara/ponto de vista inicial, que tem de existir -->
    <cameras initial="ss" >
        <!-- tem de existir, pelo menos uma camara dos tipos seguintes (perspective ou ortho) -->
	
         <perspective id="ss" near="ff" far="ff" angle="ff" pos="ff ff ff" target="ff ff ff" /> 
         <ortho id="ss" near="ff" far="ff" left="ff" right="ff" top="ff" bottom="ff" /> 

    </cameras>
  

    <!-- bloco de luzes -->
    <lights>
            <!-- Deve existir pelo menos uma luz declarada -->
            <light id="Ommnnnn" type="omni" enabled="true" marker="true" pos="0 50 5" >
              <component type="ambient" value="0.1 0.1 0.1 0" />
              <component type="diffuse" value="1 1 1 1" />
              <component type="specular" value="0 0 0 0" />

            </light>
<!--
            <light id="ss" type="spot" enabled="true" marker="true" pos="5 1 5" target="7 0 7"
                angle="10" exponent="9" >
              <component type="ambient" value="0.01 0.01 0.01 0.01" />
              <component type="diffuse" value="0.9 0.9 0.9 0.9" />
              <component type="specular" value="0.9 0.9 0.9 0.9" />
            </light> -->
    </lights>

    <!-- bloco de texturas. Este bloco tem de existir mas pode estar vazio, se nao forem usadas texturas -->
    <!--   ver topico 'Notas finais' no enunciado sobre os parametros texlength_... -->
    <textures>       
           <texture id="random_texture" file="texture.jpg" texlength_s="1" texlength_t="2" />
    </textures>

    <!-- bloco de materiais; --> 
    <appearances>
        <!-- deve existir um ou mais blocos "appearance" -->
        <!-- IMPORTANTE: -->
        <!--   textureref e opcional, a utilizar caso haja textura associada a esta aparencia -->
      <appearance id="lightgray" shininess="1" textureref="" >
          <component type="ambient" value="0.5 0.5 0.5 0" />
          <component type="diffuse" value="0.9 0.9 0.9 0" />
          <component type="specular" value="0.9 0.9  0.9 0" />
      </appearance>

      <appearance id="darkgray" shininess="2" textureref="" >
        <component type="ambient" value="0.05 0.05 0.05 0" />
        <component type="diffuse" value="0.2 0.2 0.2 0" />
        <component type="specular" value="0.2 0.2 0.2 0" />
      </appearance>      
      
      <appearance id="redishorange" shininess="4" textureref="" >
                <component type="ambient" value="0.5 0.1 0 0" />
                <component type="diffuse" value="1 0.2 0 0" />
                <component type="specular" value="1 0.2  0 0" />
      </appearance>
      
      <appearance id="yellow" shininess="3" textureref="" >
               <component type="ambient" value="0.5 0.5 0 0" />
               <component type="diffuse" value="1 1 0 0" />
               <component type="specular" value="1 1 0 0" />
        </appearance> 
		
		<appearance id="white" shininess="5" textureref="" >
               <component type="ambient" value="0.5 0.5 0.5 0" />
               <component type="diffuse" value="1 1 1 0" />
               <component type="specular" value="1 1 1 0" />
        </appearance> 
		
		<appearance id="blue" shininess="6" textureref="" >
               <component type="ambient" value="0 0 0.5 0" />
               <component type="diffuse" value="0 0 1 0" />
               <component type="specular" value="0 0 1 0" />
        </appearance> 

		<appearance id="black" shininess="1" textureref="" >
               <component type="ambient" value="0.01 0.01 0.01 0" />
               <component type="diffuse" value="0.05 0.05 0.05 0" />
               <component type="specular" value="0.05 0.05 0.05 0" />
        </appearance> 
		
    </appearances>

    <!-- bloco do grafo; "rootid" identifica o no de raiz -->
    <graph rootid="cop_car">
		
		<node id="cop_car">
			<transforms>
					<transform type="translate" to="5 0 5" />
			</transforms>
				<descendants>
					<noderef id="cop_car_chassi_right_side"/>
				<!--	<noderef id="cop_car_chassi_right_side"/>-->
				</descendants> 
		</node>
		
		<!--<node id="cop_car_chassi_left_side">
				<appearanceref id="blue"/>
			<transforms>
					<transform type="translate" to="0 0 -2.5" />
					 <transform type="scale" factor="-1 1 1" />
					<transform type="rotate" axis="yy" angle="180"/>
			</transforms>
				 <descendants>
					<noderef id="cop_car_chassi_black_bottom"/>
					<noderef id="cop_car_chassi_black_top"/>
					<noderef id="cop_car_chassi_white_bottom"/>
					<noderef id="cop_car_chassi_white_top"/>
				</descendants> 
		</node>		-->
		
		<node id="cop_car_chassi_right_side">
				<appearanceref id="blue"/>
				 <descendants>
					  <noderef id="cop_car_chassi_right_black_bottom"/>
					  <noderef id="cop_car_chassi_right_black_top"/>
					  <noderef id="cop_car_chassi_right_white_bottom"/>
					  <noderef id="cop_car_chassi_right_white_top"/>
            <noderef id="cop_car_light_front_right"/>
            <noderef id="cop_car_light_front_left"/>
            <noderef id="cop_car_light_back_right"/>
            <noderef id="cop_car_light_back_left"/>
            <noderef id="cop_car_right_front_wheel" />
            <noderef id="cop_car_left_front_wheel" />
            <noderef id="cop_car_right_back_wheel" />
            <noderef id="cop_car_left_back_wheel" />
         </descendants>  
		</node>

      <node id="cop_car_right_front_wheel">
        <transforms>
          <transform type="translate" to="1 0 0" />
        </transforms>
        <descendants>
          <noderef id="cop_car_wheel"/>
        </descendants>
      </node>

      <node id="cop_car_right_back_wheel">
        <transforms>
          <transform type="translate" to="-1 0 0" />
        </transforms>
        <descendants>
          <noderef id="cop_car_wheel"/>
        </descendants>
      </node>
      
      <node id="cop_car_left_back_wheel">
        <transforms>
          <transform type="translate" to="-1 0 -2.3" />
          <transform type="rotate" axis="yy" angle="180" />
        </transforms>
        <descendants>
          <noderef id="cop_car_wheel"/>
        </descendants>
      </node>

      <node id="cop_car_left_front_wheel">
        <transforms>
          <transform type="translate" to="1 0 -2.3" />
          <transform type="rotate" axis="yy" angle="180" />
        </transforms>
        <descendants>
          <noderef id="cop_car_wheel"/>
        </descendants>
      </node>      
      
      <node id="cop_car_wheel" >
        <appearanceref id="lightgray"/>
        <primitives>
              <cylinder base="0.4" top="0.4" height="0.05" slices="20" stacks="20" />
        </primitives>
        <descendants>
          <noderef id="cop_car_wheel_tire" />
        </descendants>
      </node>


      
      <node id="cop_car_wheel_tire" >
        <appearanceref id="darkgray"/>
        <primitives>
          <torus slices="20" loops="20" outer="0.35" inner="0.1"/>
        </primitives>
      </node>


      <node id="cop_car_light_back_left">
        <appearanceref id="redishorange" />
        <transforms>
          <transform type="translate" to="-2.05 0.7 -2" />
        </transforms>
        <descendants>
          <noderef id="cop_car_light" />
        </descendants>
      </node>

      <node id="cop_car_light_back_right">
        <appearanceref id="redishorange" />
        <transforms>
          <transform type="translate" to="-2.05 0.7 -0.3" />
        </transforms>
        <descendants>
          <noderef id="cop_car_light" />
        </descendants>
      </node>

      <node id="cop_car_light_front_left">
        <appearanceref id="yellow" />
        <transforms>
          <transform type="translate" to="2.1 0.5 -2" />
        </transforms>
        <descendants>
          <noderef id="cop_car_light" />
        </descendants>
      </node>      
      
      <node id="cop_car_light_front_right">
        <appearanceref id="yellow" />
        <transforms>
          <transform type="translate" to="2.1 0.5 -0.3" />
        </transforms>
        <descendants>
          <noderef id="cop_car_light" />
        </descendants>
      </node>


      <node id="cop_car_light">
        <transforms>
          <transform type="rotate" axis="yy" angle="90"></transform>
        </transforms>
        <primitives>
          <cylinder base="0.2" top="0.2" height="0.05" slices="20" stacks="20" />
        </primitives>
      </node>
      
      
		<node id="cop_car_chassi_right_black_bottom">
			<appearanceref id="blue"/>
			<primitives>
				<rectangle xy1="-2 0 0" xy2="-1.3 1 0"/>
				<rectangle xy1="-1.3 0.3 0" xy2="-0.8 1 0"/>
				
				<rectangle xy1="0.8 0.3 0" xy2="1.3 1 0"/>
				<rectangle xy1="1.3 0 0" xy2="2.1 1 0"/>

        <triangle xyz1="-2 0 0" xyz2="-2 1 0" xyz3="-2 1 -2.3"/>
        <triangle xyz1="-2 0 0" xyz2="-2 1 -2.3" xyz3="-2 0 -2.3"/>

        <triangle xyz1="-2 1 0" xyz2="-1.2 1 0" xyz3="-1.2 1 -2.3" />
        <triangle xyz1="-2 1 0" xyz2="-1.2 1 -2.3" xyz3="-2 1 -2.3" />

        <triangle xyz3="2.1 1 0" xyz2="1.2 1 0" xyz1="1.2 1 -2.3" />
        <triangle xyz3="2.1 1 0" xyz2="1.2 1 -2.3" xyz1="2.1 1 -2.3" />

        <triangle xyz3="2.1 0 0" xyz2="2.1 1 0" xyz1="2.1 1 -2.3"/>
        <triangle xyz3="2.1 0 0" xyz2="2.1 1 -2.3" xyz1="2.1 0 -2.3"/>

      </primitives>
		</node>


		<node id="cop_car_chassi_right_white_bottom">
			<appearanceref id="white"/>
			<primitives>
				<rectangle xy1="-0.8 0" xy2="0 1"/>
				<rectangle xy1="0 0" xy2="0.8 1"/>

        <triangle xyz1="-0.8 1.797 -0.07" xyz2="0.8 1.797 -0.07" xyz3="-0.8 1.798 -2.3"/>
        <triangle xyz1="0.8 1.797 -0.07" xyz2="0.8 1.797 -2.3" xyz3="-0.8 1.797 -2.3"/>
        
      </primitives>
		</node>

				
		<node id="cop_car_chassi_right_black_top">
			<transforms>
				  <transform type="translate" to="0 1 0" />
				  <transform type="rotate" axis="xx" angle="-5" />
			</transforms>
			<appearanceref id="blue"/>
			<primitives>
				<triangle xyz1="-1.2 0 0" xyz2="-0.8 0 0" xyz3="-0.8 0.8 0"/>
				<triangle xyz1="0.8 0 0" xyz2="1.2 0 0" xyz3="0.8 0.8 0"/>
      </primitives>
		</node>
		
		<node id="cop_car_chassi_right_white_top">
			<transforms>
				  <transform type="translate" to="0 1 0" />
				  <transform type="rotate" axis="xx" angle="-5" />
			</transforms>
			<appearanceref id="white"/>
			<primitives>
				<rectangle xy1="-0.8 0 0" xy2="0 0.8 0"/>
				<rectangle xy1="0 0 0" xy2="0.8 0.8 0"/>
			</primitives>
		</node>
		
    </graph>
</anf>
